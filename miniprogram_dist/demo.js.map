{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/demo.js","webpack:///./src/components/common/component_wrapper.js","webpack:///./src/mixins/basic.js"],"names":["relation","props","type","value","methods","onClick","console","log","name","relationFunctions","ancestor","linked","parent","unlinked","descendant","child","children","push","filter","it","mapKeys","source","target","map","Object","keys","forEach","key","makeRelation","options","componentOptions","linkChanged","beforeCreate","destroyed","created","bind","detached","relations","assign","node","ComponentWrapper","data","mixins","mounted","classes","externalClasses","behaviors","basic","field","properties","Array","isArray","multipleSlots","addGlobalClass","Component","Behavior","$emit","triggerEvent","set","callback","setData","Promise","wx","nextTick","resolve","getRect","selector","all","createSelectorQuery","in","boundingClientRect","rect","length","exec"],"mappings":"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","file":"demo.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","/* eslint-disable */\nimport { ComponentWrapper } from './components/common/component_wrapper';\n\nComponentWrapper({\n    relation: {\n    },\n    props: {\n      type: {\n        type: null,\n        value: ''\n      }\n    },\n    methods: {\n      onClick () {\n        console.log('获取列表数据')\n      }\n    },\n    name: 'demo'\n  })","/* eslint-disable */\nimport { basic } from '../../mixins/basic';\n\nconst relationFunctions = {\n    ancestor: {\n        linked(parent) {\n            this.parent = parent;\n        },\n        unlinked() {\n            this.parent = null;\n        },\n    },\n    descendant: {\n        linked(child) {\n            this.children = this.children || [];\n            this.children.push(child);\n        },\n        unlinked(child) {\n            this.children = (this.children || []).filter(it => it !== child);\n        },\n    },\n};\nfunction mapKeys(source, target, map) {\n    Object.keys(map).forEach(key => {\n        if (source[key]) {\n            target[map[key]] = source[key];\n        }\n    });\n}\nfunction makeRelation(options, componentOptions, relation) {\n    const { type, name, linked, unlinked, linkChanged } = relation;\n    const { beforeCreate, destroyed } = componentOptions;\n    if (type === 'descendant') {\n        options.created = function () {\n            beforeCreate && beforeCreate.bind(this)();\n            this.children = this.children || [];\n        };\n        options.detached = function () {\n            this.children = [];\n            destroyed && destroyed.bind(this)();\n        };\n    }\n    options.relations = Object.assign(options.relations || {}, {\n        [`../${name}/index`]: {\n            type,\n            linked(node) {\n                relationFunctions[type].linked.bind(this)(node);\n                linked && linked.bind(this)(node);\n            },\n            linkChanged(node) {\n                linkChanged && linkChanged.bind(this)(node);\n            },\n            unlinked(node) {\n                relationFunctions[type].unlinked.bind(this)(node);\n                unlinked && unlinked.bind(this)(node);\n            },\n        }\n    });\n}\nfunction ComponentWrapper(componentOptions = {}) {\n    const options = {};\n    mapKeys(componentOptions, options, {\n        data: 'data',\n        props: 'properties',\n        mixins: 'behaviors',\n        methods: 'methods',\n        beforeCreate: 'created',\n        created: 'attached',\n        mounted: 'ready',\n        relations: 'relations',\n        destroyed: 'detached',\n        classes: 'externalClasses'\n    });\n    const { relation } = componentOptions;\n    if (relation) {\n        makeRelation(options, componentOptions, relation);\n    }\n    // add default externalClasses\n    options.externalClasses = options.externalClasses || [];\n    options.externalClasses.push('custom-class');\n    // add default behaviors\n    options.behaviors = options.behaviors || [];\n    options.behaviors.push(basic);\n    // map field to form-field behavior\n    if (componentOptions.field) {\n        options.behaviors.push('wx://form-field');\n    }\n    if (options.properties) {\n        Object.keys(options.properties).forEach(name => {\n            if (Array.isArray(options.properties[name])) {\n                // miniprogram do not allow multi type\n                options.properties[name] = null;\n            }\n        });\n    }\n    // add default options\n    options.options = {\n        multipleSlots: true,\n        addGlobalClass: true\n    };\n    Component(options);\n}\nexport { ComponentWrapper };\n","/* eslint-disable */\nexport const basic = Behavior({\n  methods: {\n      $emit(...args) {\n          this.triggerEvent(...args);\n      },\n      set(data, callback) {\n          this.setData(data, callback);\n          return new Promise(resolve => wx.nextTick(resolve));\n      },\n      getRect(selector, all) {\n          return new Promise(resolve => {\n              wx.createSelectorQuery()\n                  .in(this)[all ? 'selectAll' : 'select'](selector)\n                  .boundingClientRect(rect => {\n                  if (all && Array.isArray(rect) && rect.length) {\n                      resolve(rect);\n                  }\n                  if (!all && rect) {\n                      resolve(rect);\n                  }\n              })\n                  .exec();\n          });\n      }\n  }\n});\n"],"sourceRoot":""}